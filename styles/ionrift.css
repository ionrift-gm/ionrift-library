/* Ionrift Shared Design System */
/* Merged from Ionrift Sounds & Ionrift Lib */

:root {
    --ionrift-glass-bg: rgba(20, 20, 30, 0.95);
    --ionrift-glass-border: 1px solid rgba(139, 92, 246, 0.3);
    --ionrift-glass-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
    --ionrift-font-stack: "Signika", sans-serif;
    --ionrift-accent: #8b5cf6;
    /* Violet */
    --ionrift-accent-glow: 0 0 15px rgba(139, 92, 246, 0.5);
    --ionrift-text-main: #ffffff;
    --ionrift-text-muted: #e0e0e0;
}

/* Base Window Styling (The "Purple/Black Glass" Look) */
.ionrift-window.window-app.glass-ui,
.ionrift-window.window-app.ionrift {
    background: var(--ionrift-glass-bg) !important;
    backdrop-filter: blur(10px);
    border: var(--ionrift-glass-border) !important;
    box-shadow: var(--ionrift-glass-shadow) !important;
    color: var(--ionrift-text-muted);
    font-family: var(--ionrift-font-stack);
    border-radius: 8px;
    /* Smooth corners */
}

/* Ensure background applies to content if needed, but main window usually handles it */
/* Ensure background applies to content if needed, but main window usually handles it */
.ionrift-window .window-content {
    background: transparent !important;
    color: inherit;
    padding: 0;
    /* FIX: Layout for Scrolling */
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    /* Prevent double scrollbars */
}

/* FIX: Welcome/Attunement Window specific scrolling */
.ionrift-window.welcome-window .window-content {
    max-height: 80vh !important;
    /* Constraint */
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

/* crucial: The form must fill the content area */
.ionrift-window.welcome-window form {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

.ionrift-window.welcome-window .welcome-body {
    flex: 1;
    overflow-y: auto;
    /* Scroll ONLY the body */
    padding: 10px;
    /* Firefox scrollbar fix */
    scrollbar-color: #6d28d9 rgba(0, 0, 0, 0.4);
    scrollbar-width: thin;
}

/* Header */
.ionrift-window .window-header {
    background: rgba(255, 255, 255, 0.05) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: var(--ionrift-text-main);
    flex: 0 0 38px !important;
    min-height: 38px !important;
    height: 38px !important;
    padding: 0 10px !important;
    align-items: center;
}

.ionrift-window .window-title {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* Headings within content */
.ionrift-window h1,
.ionrift-window h2,
.ionrift-window h3 {
    border-bottom: 2px solid var(--ionrift-accent) !important;
    color: var(--ionrift-text-main) !important;
}

/* Tab Navigation - Clean & High Contrast */
.ionrift-window nav.tabs .item {
    background: rgba(60, 60, 60, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    border-radius: 4px;
    margin: 0 4px;
    padding: 8px 16px;
    font-weight: 700;
    font-size: 1.1em;
    transition: all 0.2s;
}

.ionrift-window nav.tabs .item:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border-color: #fff;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
}

.ionrift-window nav.tabs .item.active {
    background: rgba(139, 92, 246, 0.8);
    border-color: #a78bfa;
    color: #ffffff;
    text-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
}

/* Data Tables */
.ionrift-window .ionrift-table {
    width: 100%;
    margin-top: 10px;
    border-collapse: separate;
    border-spacing: 0 4px;
}

.ionrift-window .ionrift-table th {
    text-align: left;
    padding: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-weight: 700;
    border-bottom: 2px solid rgba(139, 92, 246, 0.5);
    text-transform: uppercase;
    font-size: 0.9em;
}

.ionrift-window .ionrift-table td {
    padding: 8px;
    background: rgba(0, 0, 0, 0.3);
    vertical-align: middle;
    color: #ccc;
}

.ionrift-window .ionrift-table tr:hover td {
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
}

.ionrift-window .ionrift-table td:first-child {
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    color: #fff;
    font-weight: 600;
}

.ionrift-window .ionrift-table td:last-child {
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
}

/* Input Fields - High Contrast */
.ionrift-window input[type="text"],
.ionrift-window input[type="number"],
.ionrift-window select {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.4) !important;
    color: #ffffff !important;
    border-radius: 4px;
    padding: 2px 8px;
    /* Reduce vertical padding to prevent overflow */
    font-family: "Consolas", "Courier New", monospace;
    /* Good for IDs */
    font-weight: 500;
    min-height: 28px;
    /* Standard Foundry height */
    height: auto !important;
    line-height: normal;
    /* Center text */
}

.ionrift-window input:focus,
.ionrift-window select:focus {
    background: rgba(0, 0, 0, 0.9) !important;
    border-color: #a78bfa !important;
    box-shadow: 0 0 8px rgba(139, 92, 246, 0.5);
    outline: none;
}

.ionrift-window input::placeholder {
    color: rgba(255, 255, 255, 0.5) !important;
}

.ionrift-window select option {
    background: #222;
    color: #fff;
}

/* Buttons */
.ionrift-window button {
    background: linear-gradient(to bottom, #4a4a4a, #2a2a2a);
    border: 1px solid #000;
    color: #fff;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
}

.ionrift-window button:hover {
    background: rgba(139, 92, 246, 0.6);
    box-shadow: var(--ionrift-accent-glow);
    border-color: var(--ionrift-accent);
}

.ionrift-window button:disabled {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.3);
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
}

/* --- Integration UI (Twin System) --- */
/* Identical look to Status Bar but for neutral integrations */

.ionrift-integration-bar {
    /* Standard Flow - Pushes content down */
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    z-index: 10;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    background: rgba(0, 0, 0, 0.4);

    /* NUCLEAR HEIGHT CONSTRAINT */
    height: 24px !important;
    min-height: 24px !important;
    max-height: 24px !important;
    padding: 0 8px !important;
    flex: 0 0 24px !important;
    overflow: hidden;

    border-radius: 4px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    pointer-events: auto;
    cursor: default;
    transition: all 0.2s;
    margin-bottom: 5px;
}

.ionrift-integration-bar:hover {
    background: rgba(0, 0, 0, 0.6);
    border-color: rgba(255, 255, 255, 0.3);
}

.ionrift-integration-bar.status-connected {
    color: #4ff !important;
    border-bottom-color: rgba(0, 255, 255, 0.3) !important;
}

.ionrift-integration-bar.status-offline {
    color: #ef4444;
    border-bottom-color: rgba(239, 68, 68, 0.3);
}

.ionrift-integration-bar.status-warning {
    color: #facc15;
    border-bottom-color: rgba(250, 204, 21, 0.3);
}

.ionrift-integration-bar.status-unknown {
    color: #888;
}

/* Integration Pill (Stadium) */
.ionrift-integration-pill {
    /* Flow Layout - Inside Bar */
    font-size: 10px;
    /* Small, crisp font */
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    pointer-events: none;
    /* Not interactive */
    cursor: default;
    transition: all 0.2s;
    line-height: 1;

    /* Stadium Shape */
    padding: 1px 10px;
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.2);

    height: 18px;
    /* Fixed height for consistency */
}

.ionrift-integration-pill.status-connected {
    background: rgba(0, 255, 255, 0.15);
    border: 1px solid #4ff !important;
    /* Solid Border */
    color: #4ff !important;
    /* Cyan-400 */
    box-shadow: 0 0 5px rgba(0, 255, 255, 0.2);
    text-shadow: none;
    /* Removed glow to match solid look */
}

.ionrift-integration-pill.status-offline {
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid #f87171;
    /* Solid Border */
    color: #f87171;
    /* Red-400 */
    text-shadow: none;
}

.ionrift-integration-pill.status-warning {
    background: rgba(234, 179, 8, 0.15);
    border: 1px solid #facc15;
    /* Solid Border */
    color: #facc15;
}

.ionrift-integration-pill.status-unknown {
    background: rgba(80, 80, 80, 0.3);
    border: 1px solid #aaa;
    /* Solid Border */
    color: #ccc;
}

.ionrift-window .play-preview {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.15);
    color: #fff;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
}

.ionrift-window .play-preview:hover {
    background: #8b5cf6;
    border-color: #a78bfa;
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
    transform: scale(1.1);
}

/* Settings Icon Standardization */
.ionrift-integration-icon {
    font-size: 1.1em;
    vertical-align: middle;
    transition: color 0.3s;
}

.ionrift-integration-icon.status-connected {
    color: #4ff !important;
    text-shadow: 0 0 5px rgba(0, 255, 255, 0.4);
}

.ionrift-integration-icon.status-offline {
    color: #f87171 !important;
    text-shadow: 0 0 5px rgba(248, 113, 113, 0.4);
}

.ionrift-integration-icon.status-warning {
    color: #facc15 !important;
}

.ionrift-integration-icon.status-unknown {
    color: #888 !important;
}

/* Footer */
.ionrift-window .sheet-footer {
    display: flex;
    justify-content: flex-end;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.notes {
    font-size: 0.85em;
    color: #aaa;
}

/* --- LEGACY / ADDITIONAL LIB STYLES --- */

/* Art Review Dialog (Preserved from Lib) */
.ionrift-window .art-review-dialog {
    display: flex;
    flex-direction: column;
    height: 100%;
}

/* ... (Shortened for brevity, assuming generic classes cover most needs, 
   but ensuring specific layout classes remain if needed) ... */

.ionrift-window .img-container {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.ionrift-window img.token-thumb {
    width: 32px !important;
    height: 32px !important;
    border-radius: 50%;
    border: 1px solid var(--ionrift-text-muted);
    vertical-align: middle;
    margin-right: 8px;
    object-fit: cover;
}

/* --- Status Indicators (Standardized) --- */
/* Extracted from ionrift-tokens (inline) to Lib */
.ionrift-status {
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.ionrift-status.success {
    color: #4ff;
    /* Cyan/Electric Blue */
}

.ionrift-status.error {
    color: #ef4444;
    /* Red-500 */
}

.ionrift-status.loading {
    color: #aaa;
}

.ionrift-status.unverified {
    color: #aaa;
    opacity: 0.5;
}

.ionrift-status.unverified {
    color: #aaa;
    opacity: 0.5;
}

/* Standard Status Bar (In-Content, Top Right) */
.ionrift-status-bar {
    /* Standard Flow - Pushes content down */
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    z-index: 10;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    background: rgba(0, 0, 0, 0.4);

    /* Nuclear Height Constraint */
    height: 24px !important;
    min-height: 24px !important;
    max-height: 24px !important;
    padding: 0 8px !important;
    flex: 0 0 24px !important;
    overflow: hidden;

    border-radius: 4px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    pointer-events: auto;
    cursor: default;
    transition: all 0.2s;
    margin-bottom: 5px;
}

.ionrift-status-bar:hover {
    background: rgba(0, 0, 0, 0.6);
    border-color: rgba(255, 255, 255, 0.3);
}

.ionrift-status-bar.status-connected {
    color: #4ff;
    border-bottom-color: rgba(0, 255, 255, 0.3);
}

.ionrift-status-bar.status-offline {
    color: #ef4444;
    border-bottom-color: rgba(239, 68, 68, 0.3);
}

.ionrift-status-bar.status-warning {
    color: #facc15;
    border-bottom-color: rgba(250, 204, 21, 0.3);
}

.ionrift-status-bar.status-unknown {
    color: #888;
}

/* Standard Status Pill (Minimalist, Text+Glow) */
.ionrift-status-pill {
    /* Flow Layout - Inside Bar */
    font-size: 10px;
    /* Small, crisp font */
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    pointer-events: none;
    /* Not interactive */
    cursor: default;
    transition: all 0.2s;
    line-height: 1;

    /* Stadium Shape */
    padding: 1px 10px;
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.2);

    height: 18px;
    /* Fixed height for consistency */
}

.ionrift-status-pill.status-connected {
    background: rgba(6, 182, 212, 0.15);
    border: 1px solid #22d3ee;
    /* Solid Border */
    color: #22d3ee;
    /* Cyan-400 */
    box-shadow: 0 0 5px rgba(6, 182, 212, 0.2);
    text-shadow: none;
    /* Removed glow to match solid look */
}

.ionrift-status-pill.status-offline {
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid #f87171;
    /* Solid Border */
    color: #f87171;
    /* Red-400 */
    text-shadow: none;
}

.ionrift-status-pill.status-warning {
    background: rgba(234, 179, 8, 0.15);
    border: 1px solid #facc15;
    /* Solid Border */
    color: #facc15;
}

.ionrift-status-pill.status-unknown {
    background: rgba(80, 80, 80, 0.3);
    border: 1px solid #aaa;
    /* Solid Border */
    color: #ccc;
}

/* Status Badges - Art Director Standard */
.ionrift-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 3px 12px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #888;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
}

.ionrift-badge.success {
    background: rgba(34, 211, 238, 0.15);
    /* Cyan-400 tint */
    border-color: rgba(34, 211, 238, 0.5);
    color: #22d3ee;
    /* Cyan-400 */
    box-shadow: 0 0 12px rgba(34, 211, 238, 0.2);
    text-shadow: 0 0 5px rgba(34, 211, 238, 0.4);
}

.ionrift-badge.error {
    background: rgba(248, 113, 113, 0.15);
    border-color: rgba(248, 113, 113, 0.5);
    color: #f87171;
    /* Red-400 */
    box-shadow: 0 0 12px rgba(248, 113, 113, 0.2);
}

.ionrift-badge.loading {
    background: rgba(167, 139, 250, 0.15);
    border-color: rgba(167, 139, 250, 0.4);
    color: #a78bfa;
}

/* --- Login App (Auth) --- */
.login-app .content {
    text-align: center;
    padding: 10px;
}

.user-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 20px;
}

.user-card.Free {
    border-color: #aaa;
}

.user-card.Initiate {
    border-color: #8b5cf6;
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
}

.user-card.Acolyte {
    border-color: #4ff;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
}

.tier-badge {
    font-size: 1.5em;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 15px;
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.credits {
    margin: 20px 0;
}

.credits .count {
    display: block;
    font-size: 3em;
    font-weight: 700;
    line-height: 1;
    color: #4ff;
    /* Cyan */
    text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
}

.credits .label {
    text-transform: uppercase;
    letter-spacing: 2px;
    font-size: 0.8em;
    color: #aaa;
}

.patreon-id {
    font-family: monospace;
    opacity: 0.5;
    font-size: 0.8em;
    margin-bottom: 20px;
}

.patreon-btn {
    background: #FF424D !important;
    /* Patreon Coral */
    color: #fff !important;
    font-weight: 700;
    border: none;
    padding: 10px 20px;
}

.patreon-btn:hover {
    background: #ff5c66 !important;
    box-shadow: 0 0 15px rgba(255, 66, 77, 0.5);
}

.login-prompt .hint {
    margin-bottom: 20px;
    font-size: 1.1em;
}

.login-prompt .sub-hint {
    margin-top: 10px;
    font-size: 0.8em;
    color: #888;
    font-style: italic;
}

.login-prompt .sub-hint {
    margin-top: 10px;
    font-size: 0.8em;
    color: #888;
    font-style: italic;
}

/* --- Shared Components --- */

/* Purple Save Button */
.ionrift-save-btn {
    background: rgba(139, 92, 246, 0.3);
    border: 1px solid rgba(139, 92, 246, 0.6);
    color: #fff;
    padding: 6px 20px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
    font-size: 0.95em;
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.1);
}

.ionrift-save-btn:hover {
    background: rgba(139, 92, 246, 0.5);
    color: #fff;
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
}

/* Custom Scrollbars - Purple Theme */
.ionrift-window,
.ionrift-sound-config .content,
.ionrift-window .results-table,
.ionrift-window .scrollable,
.ionrift-list {
    scrollbar-color: #6d28d9 rgba(0, 0, 0, 0.4) !important;
    scrollbar-width: thin !important;
}

.ionrift-window ::-webkit-scrollbar,
.ionrift-window *::-webkit-scrollbar,
.ionrift-window .window-content::-webkit-scrollbar,
.ionrift-window .sheet-body::-webkit-scrollbar,
.ionrift-window .tab::-webkit-scrollbar,
.ionrift-window ul::-webkit-scrollbar,
.ionrift-window ol::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
    background: rgba(0, 0, 0, 0.4) !important;
}

.ionrift-window ::-webkit-scrollbar-track,
.ionrift-window *::-webkit-scrollbar-track,
.ionrift-window .window-content::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.4) !important;
    border-radius: 4px;
}

.ionrift-window ::-webkit-scrollbar-thumb,
.ionrift-window *::-webkit-scrollbar-thumb,
.ionrift-window .window-content::-webkit-scrollbar-thumb {
    background: #6d28d9 !important;
    /* Purple-700 */
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.2s;
}

.ionrift-window ::-webkit-scrollbar-thumb:hover,
.ionrift-window *::-webkit-scrollbar-thumb:hover {
    background: #8b5cf6 !important;
    /* Purple-500 */
}

/* ----------------------------------------- */
/*  Diagnostic Suite                         */
/* ----------------------------------------- */

.ionrift.diagnostics .window-content {
    background: transparent !important;
    color: var(--ionrift-text-main);
    padding: 0;
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

.ionrift.diagnostics form {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.diagnostic-header {
    background: rgba(255, 255, 255, 0.05);
    color: var(--ionrift-text-main);
    padding: 10px 15px;
    border-bottom: 2px solid var(--ionrift-accent);
    flex: 0 0 auto;
}

.diagnostic-header h1 {
    margin: 0;
    border: none;
    font-family: var(--ionrift-font-stack);
    font-size: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.diagnostic-header .summary {
    margin: 5px 0 0 0;
    font-size: 13px;
    opacity: 0.9;
    display: flex;
    gap: 15px;
    color: var(--ionrift-text-muted);
}

.diagnostic-header .count {
    font-weight: bold;
}

.diagnostic-header .count.pass {
    color: #2ecc71;
}

.diagnostic-header .count.warn {
    color: #f1c40f;
}

.diagnostic-header .count.fail {
    color: #e74c3c;
}

.diagnostic-results {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

.module-group {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 5px;
    margin-bottom: 10px;
    overflow: hidden;
}

.module-title {
    background: rgba(255, 255, 255, 0.05);
    padding: 5px 10px;
    margin: 0;
    font-size: 14px;
    font-weight: bold;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--ionrift-text-muted);
    text-transform: uppercase;
}

.test-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.test-item {
    padding: 8px 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--ionrift-text-muted);
}

.test-item:last-child {
    border-bottom: none;
}

.test-item .status-icon {
    flex: 0 0 20px;
    text-align: center;
    font-size: 14px;
}

.test-item.status-pass .status-icon {
    color: #27ae60;
}

.test-item.status-warn .status-icon {
    color: #f39c12;
}

.test-item.status-fail .status-icon {
    color: #c0392b;
}

.test-item .test-name {
    flex: 0 0 150px;
    font-weight: bold;
    color: var(--ionrift-text-main);
}

.test-item .test-message {
    flex: 1;
    font-style: italic;
    color: var(--ionrift-text-muted);
    opacity: 0.8;
}

.no-results {
    text-align: center;
    padding: 20px;
    color: var(--ionrift-text-muted);
    font-style: italic;
}

.ionrift.diagnostics .sheet-footer {
    flex: 0 0 auto;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.ionrift.diagnostics button {
    background: linear-gradient(to bottom, #4a4a4a, #2a2a2a);
    border: 1px solid #000;
    color: #fff;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
}

.ionrift.diagnostics button:hover {
    background: rgba(139, 92, 246, 0.6);
    box-shadow: var(--ionrift-accent-glow);
    border-color: var(--ionrift-accent);
}

/* --- INTEGRATION STATUS BAR (Generic) --- */
/* "Twin" of the Status Bar - Pixel Perfect Match */
.ionrift-integration-bar {
    /* Standard Flow - Pushes content down */
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    z-index: 10;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    background: rgba(0, 0, 0, 0.4);

    /* NUCLEAR HEIGHT CONSTRAINT */
    height: 24px !important;
    min-height: 24px !important;
    max-height: 24px !important;
    padding: 0 8px !important;
    flex: 0 0 24px !important;
    overflow: hidden;

    border-radius: 4px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    pointer-events: auto;
    cursor: default;
    transition: all 0.2s;
    margin-bottom: 5px;
}

.ionrift-integration-bar.status-connected {
    background: rgba(46, 204, 113, 0.1);
    border-bottom: 1px solid rgba(46, 204, 113, 0.3);
}

.ionrift-integration-bar.status-offline {
    background: rgba(231, 76, 60, 0.1);
    border-bottom: 1px solid rgba(231, 76, 60, 0.3);
}

.ionrift-integration-bar.status-warning {
    background: rgba(241, 196, 15, 0.1);
    border-bottom: 1px solid rgba(241, 196, 15, 0.3);
}

.ionrift-integration-pill {
    /* Flow Layout - Inside Bar */
    font-size: 10px;
    /* Small, crisp font */
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    pointer-events: none;
    /* Not interactive */
    cursor: default;
    transition: all 0.2s;
    line-height: 1;

    /* Stadium Shape */
    padding: 1px 10px;
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.2);

    height: 18px;
    /* Fixed height for consistency */
}

.ionrift-integration-pill.status-connected {
    background: rgba(46, 204, 113, 0.2);
    border-color: #2ecc71;
    color: #2ecc71;
    box-shadow: 0 0 5px rgba(46, 204, 113, 0.2);
}

.ionrift-integration-pill.status-offline {
    background: rgba(231, 76, 60, 0.2);
    border-color: #e74c3c;
    color: #e74c3c;
    box-shadow: 0 0 5px rgba(231, 76, 60, 0.2);
}

.ionrift-integration-pill.status-warning {
    background: rgba(241, 196, 15, 0.2);
    border-color: #f1c40f;
    color: #f1c40f;
    box-shadow: 0 0 5px rgba(241, 196, 15, 0.2);
}

.ionrift-integration-icon.status-connected {
    color: #2ecc71;
}

.ionrift-integration-icon.status-offline {
    color: #e74c3c;
}

.ionrift-integration-icon.status-warning {
    color: #f1c40f;
}

.ionrift-integration-icon.status-unknown {
    color: #95a5a6;
}

/* --- Welcome App Branding (Shared) --- */

.ionrift.welcome-window .window-content {
    padding: 0;
    overflow: hidden;
    background: transparent !important;
}

.welcome-header {
    background: linear-gradient(135deg, rgba(50, 20, 70, 0.8), rgba(20, 20, 30, 0.0));
    padding: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.welcome-header.glass-header {
    background: linear-gradient(135deg, rgba(50, 20, 70, 0.8), rgba(20, 20, 30, 0.0));
}

.welcome-header h1 {
    font-family: "Modesto Condensed", serif;
    font-size: 2em;
    border: none;
    margin: 0;
    color: #fff;
    text-shadow: 0 0 10px rgba(180, 100, 255, 0.5);
}

.welcome-header p {
    margin: 5px 0 0 0;
    opacity: 0.8;
    font-style: italic;
}

.welcome-body {
    padding: 20px;
}

.welcome-body.glass-body {
    padding: 20px;
}

.intro-text {
    font-size: 1.1em;
    margin-bottom: 20px;
    line-height: 1.4;
}

.step-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.step-item {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(255, 255, 255, 0.05);
    padding: 15px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.2s;
}

.step-item.current {
    background: rgba(100, 50, 180, 0.2);
    border-color: rgba(150, 100, 255, 0.4);
}

.step-item.completed {
    opacity: 0.7;
    background: rgba(50, 100, 50, 0.2);
}

.step-icon {
    font-size: 1.5em;
    width: 40px;
    text-align: center;
    color: var(--ionrift-text-main);
}

.step-icon .success {
    color: #4cd137;
}

.step-content {
    flex: 1;
}

.step-content h3 {
    margin: 0 0 5px 0;
    border: none;
    font-size: 1.1em;
}

.step-content p {
    margin: 0;
    font-size: 0.9em;
    opacity: 0.8;
}

.step-content code {
    background: rgba(0, 0, 0, 0.3);
    padding: 2px 4px;
    border-radius: 3px;
    font-family: monospace;
    color: #e0e0e0;
}

.step-action button {
    width: auto;
    padding: 5px 15px;
    background: rgba(100, 50, 180, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    transition: all 0.2s;
}

.step-action button:hover:not(:disabled) {
    background: rgba(120, 70, 200, 0.8);
    box-shadow: 0 0 10px rgba(150, 100, 255, 0.4);
}

.step-action button:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    background: rgba(80, 80, 80, 0.2);
    box-shadow: none;
    border-color: rgba(255, 255, 255, 0.1);
}

.step-action .status-tag.success {
    color: #4cd137;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.9em;
}

.welcome-footer {
    padding: 15px 20px;
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.finish-btn {
    background: linear-gradient(90deg, #27ae60, #2ecc71);
    border: 1px solid #2ecc71;
    color: white;
    font-weight: bold;
}

.skip-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ccc;
}

/* --- Ionrift List Component (Standard) --- */
.ionrift-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 10px;
    overflow-y: auto;
    min-height: 0;
}

.ionrift-list>* {
    flex-shrink: 0;
}

.ionrift-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    transition: all 0.2s ease;
}

.ionrift-list-item:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(139, 92, 246, 0.3);
    transform: translateX(2px);
    box-shadow: -2px 0 0 var(--ionrift-accent);
}

.ionrift-list-item .avatar {
    flex: 0 0 40px;
    height: 40px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    object-fit: cover;
    background: #000;
}

.ionrift-list-item .content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
}

.ionrift-list-item .title {
    font-weight: 700;
    color: var(--ionrift-text-main);
    font-size: 1.05em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.ionrift-list-item .subtitle {
    font-size: 0.85em;
    color: var(--ionrift-text-muted);
    opacity: 0.7;
    display: flex;
    align-items: center;
    gap: 6px;
}

.ionrift-list-item .badges {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Dashboard Header */
.dashboard-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px 20px;
    background: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    gap: 20px;
}

.dashboard-stat {
    display: flex;
    align-items: center;
    gap: 12px;
}

.dashboard-gauge {
    position: relative;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: conic-gradient(var(--ionrift-accent) var(--pct), rgba(255, 255, 255, 0.1) 0);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

.dashboard-gauge::after {
    content: "";
    position: absolute;
    width: 38px;
    height: 38px;
    background: #222;
    border-radius: 50%;
}

.dashboard-gauge span {
    position: relative;
    z-index: 1;
    font-size: 0.9em;
    font-weight: 700;
    color: #fff;
}

.dashboard-text {
    display: flex;
    flex-direction: column;
}

.dashboard-text .label {
    font-size: 0.75em;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #aaa;
}

.dashboard-text .value {
    font-size: 1.4em;
    font-weight: 700;
    color: #fff;
    line-height: 1;
}

.ionrift-search-container {
    flex: 1;
    position: relative;
    max-width: 400px;
}

.ionrift-search-container i {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #aaa;
    pointer-events: none;
}

.ionrift-search-input {
    width: 100%;
    background: rgba(0, 0, 0, 0.3) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    padding: 8px 10px 8px 34px !important;
    border-radius: 20px !important;
    color: #fff !important;
    transition: all 0.2s;
}

.ionrift-search-input:focus {
    background: rgba(0, 0, 0, 0.5) !important;
    border-color: var(--ionrift-accent) !important;
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.2);
}

/* --- Resonance Calibration (Sidebar & Cards) --- */

.ionrift-sidebar {
    background: rgba(0, 0, 0, 0.3);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    flex: 0 0 200px;
    display: flex;
    flex-direction: column;
    padding: 10px 0;
    overflow-y: auto;
}

.ionrift-sidebar .item {
    background: transparent !important;
    /* Force remove default backgrounds */
    border: none !important;
    /* Force remove default borders */
    border-left: 3px solid transparent !important;
    /* Keep our accent border */
    border-radius: 0 !important;
    box-shadow: none !important;
    padding: 10px 15px;
    /* Tighter padding */
    color: #ccc !important;
    /* Force high contrast */
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.95em;
    font-weight: 600;
    margin-bottom: 1px;
    /* Tighter gap */
    text-shadow: none !important;
}

.ionrift-sidebar .item:hover {
    background: rgba(255, 255, 255, 0.08) !important;
    color: #fff;
}

.ionrift-sidebar .item.active {
    background: linear-gradient(90deg, rgba(139, 92, 246, 0.15) 0%, rgba(0, 0, 0, 0) 100%) !important;
    border-left-color: #8b5cf6 !important;
    color: #fff !important;
    text-shadow: 0 0 10px rgba(139, 92, 246, 0.5) !important;
}

.ionrift-sidebar .item i {
    width: 20px;
    text-align: center;
    color: inherit !important;
    /* Ensure icon matches text */
    opacity: 0.8;
}

/* Fix specific Auditor tab if it has unique overrides */
.ionrift-sidebar .item.auditor-tab {
    margin-top: auto;
}

.ionrift-sidebar .header {
    text-transform: uppercase;
    font-size: 0.75em;
    color: #555;
    margin: 20px 15px 5px;
    letter-spacing: 1px;
    font-weight: 800;
    pointer-events: none;
}



.ionrift-list-header {
    font-size: 1.1em;
    font-weight: 700;
    color: #fff;
    border-bottom: 2px solid rgba(139, 92, 246, 0.5);
    padding-bottom: 5px;
    margin: 15px 0 10px;
    text-shadow: 0 0 5px rgba(139, 92, 246, 0.5);
    display: flex;
    align-items: center;
    gap: 10px;
}

.ionrift-list-item {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: all 0.2s;
}

.ionrift-list-item:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(139, 92, 246, 0.3);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.entity-info {
    min-width: 0;
    /* Flexbox text truncate fix */
}

.entity-name {
    font-weight: 700;
    font-size: 1em;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.entity-meta {
    font-size: 0.8em;
    color: #888;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Badges */
/* Badges */
.ionrift-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 3px 10px;
    border-radius: 4px;
    /* Slightly less rounded */
    font-size: 0.8em;
    font-weight: 600;
    background: rgba(255, 255, 255, 0.08);
    color: #ccc;
    border: 1px solid rgba(255, 255, 255, 0.05);
    letter-spacing: 0.5px;
}

.ionrift-badge.success {
    background: rgba(16, 185, 129, 0.15);
    color: #4ade80;
    border-color: rgba(16, 185, 129, 0.2);
}

.ionrift-badge.loading {
    background: rgba(255, 255, 255, 0.05);
    color: #666;
    border-style: dashed;
}

/* For numeric IDs */
.ionrift-badge.id-tag {
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.75em;
    background: rgba(0, 0, 0, 0.3);
    color: #aaa;
}

/* Action Buttons */
/* Action Buttons */
.entity-actions button {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #aaa;
    width: 28px;
    height: 28px;
    border-radius: 4px !important;
    /* Force square */
    padding: 0;
    line-height: 26px;
    transition: all 0.2s;
    cursor: pointer;
}

.entity-actions button:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border-color: #fff;
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
}

.entity-actions button.play-preview:hover {
    background: rgba(139, 92, 246, 0.15);
    /* Purple tint */
    border-color: #8b5cf6;
    color: #8b5cf6;
    box-shadow: 0 0 8px rgba(139, 92, 246, 0.4);
}

/* Footer Secondary Buttons */
.sheet-footer button.load-preset,
.sheet-footer button.import-config,
.sheet-footer button.export-config {
    border: 1px solid rgba(255, 255, 255, 0.25) !important;
    /* Increased visibility */
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: 4px;
    padding: 2px 10px;
}

.sheet-footer button:hover {
    border-color: rgba(255, 255, 255, 0.6) !important;
    color: #fff !important;
    background: rgba(255, 255, 255, 0.15) !important;
}

.ionrift-save-btn {
    background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
    border: none;
    color: white;
    padding: 6px 20px;
    border-radius: 4px;
    font-weight: 600;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
}

.ionrift-save-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 12px rgba(139, 92, 246, 0.4);
}